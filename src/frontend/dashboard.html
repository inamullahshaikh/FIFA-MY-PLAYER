<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
    />
    <link
      rel="icon"
      href="assets/images/football.ico"
      type="image/x-icon"
      class="circular-favicon"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css"
    />
    <style>
      :root {
        --primary: #4361ee;
        --primary-dark: #3a56d4;
        --secondary: #4cc9f0;
        --dark: #2b2d42;
        --light: #f8f9fa;
        --danger: #ef476f;
        --success: #06d6a0;
        --warning: #ffd166;
        --gray-dark: #343a40;
        --gray: #6c757d;
        --gray-light: #e9ecef;
        --transition: all 0.3s ease;
        --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
        --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
        --border-radius: 0.75rem;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        background-color: #f5f7fa;
        color: var(--dark);
        overflow-x: hidden;
        position: relative;
      }

      /* Navbar Styles */
      .navbar {
        background-color: var(--primary);
        box-shadow: var(--shadow);
        padding: 0.75rem 0;
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1030;
      }

      .navbar-brand {
        font-weight: 700;
        font-size: 1.5rem;
        letter-spacing: -0.5px;
        color: white;
        display: flex;
        align-items: center;
      }

      .navbar-brand:before {
        content: "";
        display: inline-block;
        width: 1.75rem;
        height: 1.75rem;
        margin-right: 0.75rem;
        background-color: rgba(255, 255, 255, 0.2);
        border-radius: 0.5rem;
        position: relative;
      }

      .navbar-brand:after {
        content: "";
        position: absolute;
        width: 1rem;
        height: 1rem;
        background-color: white;
        border-radius: 0.25rem;
        transform: rotate(45deg);
        margin-left: 0.375rem;
      }

      .navbar .nav-link {
        color: rgba(255, 255, 255, 0.8);
        font-weight: 500;
        padding: 0.5rem 1rem;
        transition: var(--transition);
        border-radius: var(--border-radius);
        margin: 0 0.25rem;
      }

      .navbar .nav-link:hover,
      .navbar .nav-link.active {
        color: white;
        background-color: rgba(255, 255, 255, 0.1);
      }

      .logout-btn {
        background-color: rgba(255, 255, 255, 0.15);
        color: white !important;
        border-radius: var(--border-radius);
        margin-left: 0.75rem;
        padding: 0.5rem 1.25rem !important;
        cursor: pointer;
        transition: var(--transition);
        font-weight: 600;
      }

      .logout-btn:hover {
        background-color: rgba(255, 255, 255, 0.25);
      }

      /* Sidebar Styles */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        width: 280px;
        background: white;
        box-shadow: var(--shadow);
        padding-top: 4.5rem;
        z-index: 1020;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        transition: transform 0.3s ease;
      }

      .sidebar h4 {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--gray);
        margin: 0.75rem 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid var(--gray-light);
      }

      .sidebar a {
        display: flex;
        align-items: center;
        padding: 0.875rem 1.5rem;
        color: var(--dark);
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
        margin: 0.25rem 0.75rem;
        border-radius: var(--border-radius);
        cursor: pointer;
      }

      .sidebar a:hover,
      .sidebar a.active {
        background-color: rgba(67, 97, 238, 0.1);
        color: var(--primary);
      }

      .sidebar a i {
        margin-right: 0.75rem;
        font-size: 1.25rem;
        color: var(--gray);
        transition: var(--transition);
        width: 2rem;
        text-align: center;
      }

      .sidebar a:hover i,
      .sidebar a.active i {
        color: var(--primary);
      }

      .sidebar-footer {
        padding: 1.5rem;
        border-top: 1px solid var(--gray-light);
      }

      .sidebar-footer .logout-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--gray-light);
        color: var(--gray-dark) !important;
        width: 100%;
        padding: 0.75rem !important;
        font-weight: 600;
      }

      .sidebar-footer .logout-btn:hover {
        background-color: var(--danger);
        color: white !important;
      }

      .sidebar-footer .logout-btn i {
        color: inherit;
      }

      /* Sidebar Toggle Button */
      .sidebar-toggle {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        width: 3.5rem;
        height: 3.5rem;
        background-color: var(--primary);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: var(--shadow-lg);
        cursor: pointer;
        z-index: 1040;
        transition: var(--transition);
      }

      .sidebar-toggle:hover {
        background-color: var(--primary-dark);
        transform: scale(1.05);
      }

      .sidebar-toggle i {
        font-size: 1.5rem;
      }

      /* Main Content */
      .main-content {
        margin-left: 280px;
        padding: 6rem 2rem 2rem;
        min-height: 100vh;
        transition: var(--transition);
      }

      .content-section {
        display: none;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease, transform 0.5s ease;
      }

      .content-section.active {
        display: block;
        opacity: 1;
        transform: translateY(0);
      }

      /* Dashboard Cards & Components */
      .content-section h3 {
        margin-bottom: 1.5rem;
        font-weight: 700;
        color: var(--dark);
        position: relative;
        padding-bottom: 0.75rem;
      }

      .content-section h3:after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 4rem;
        height: 4px;
        background: var(--primary);
        border-radius: 2px;
      }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px 0;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                0 8px 16px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 300% 100%;
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .dashboard-card:hover {
            transform: translateY(-8px);
            box-shadow: 
                0 32px 64px rgba(0, 0, 0, 0.15),
                0 16px 32px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }

        .dashboard-card h3 {
            color: #2c3e50;
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 0;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .player-profile h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            border-radius: 2px;
        }

        .current-club h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #45b7d1, #96ceb4);
            border-radius: 2px;
        }

        .player-avatar {
            position: relative;
        }

        .player-avatar::before {
            content: '';
            position: absolute;
            inset: -4px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            border-radius: 50%;
            z-index: -1;
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .player-avatar img {
            border: 4px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease;
        }

        .player-avatar:hover img {
            transform: scale(1.05);
        }

        .player-info h4 {
            color: #2c3e50;
            font-weight: 700;
            font-size: 1.4rem;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .badge {
            font-size: 0.85rem;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            background: linear-gradient(45deg, #667eea, #764ba2) !important;
            border: none;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .flag-container {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .flag-container img {
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .player-stats {
            margin-top: 24px;
        }

        .stat-item {
            text-align: center;
            padding: 16px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.4));
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }

        .stat-item:hover::before {
            left: 100%;
        }

        .stat-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: #2c3e50;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .club-logo {
            position: relative;
            display: inline-block;
        }

        .club-logo::before {
            content: '';
            position: absolute;
            inset: -8px;
            background: linear-gradient(45deg, #45b7d1, #96ceb4, #67b26f, #4ca2cd);
            border-radius: 20px;
            z-index: -1;
            opacity: 0.3;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.05); opacity: 0.5; }
        }

        .club-logo img {
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease;
        }

        .club-logo:hover img {
            transform: scale(1.05) rotate(5deg);
        }

        .club-info h4 {
            color: #2c3e50;
            font-weight: 700;
            font-size: 1.5rem;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .info-item {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .info-item:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateX(4px);
        }

        .info-item i {
            color: #667eea;
            font-size: 1.1rem;
        }

        .contract-info {
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
            margin-top: 16px;
        }

        .contract-item {
            flex: 1;
            min-width: 200px;
            padding: 16px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.4));
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .contract-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .contract-item i {
            color: #45b7d1;
            font-size: 1.2rem;
            margin-right: 8px;
        }

        .contract-item strong {
            color: #2c3e50;
            font-weight: 700;
        }

        @media (max-width: 768px) {
            .dashboard-card {
                padding: 24px;
                margin-bottom: 24px;
            }
            
            .player-info {
                text-align: center;
            }
            
            .club-info {
                text-align: center;
                margin-top: 20px;
            }
            
            .contract-info {
                flex-direction: column;
                gap: 16px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
        }

        .loading {
            opacity: 0.7;
            animation: loading-pulse 1.5s ease-in-out infinite;
        }

        @keyframes loading-pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
    </style>
  </head>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      <a id="wow" class="navbar-brand" href="#">Virtual XI</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link active" href="#">
              <i class="bi bi-house me-1 active"></i>Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="seasondata.html">
              <i class="bi bi-bar-chart-steps me-1"></i>Season Data
            </a>
          </li class="nav-item">
            <a class="nav-link" href="yearlydata.html">
              <i class="bi bi-bar-chart me-1"></i>Yearly Data
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="stats.html">
              <i class="bi bi-graph-up-arrow me-1"></i>Stats
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="trophies.html">
              <i class="bi bi-trophy me-1"></i>Trophy Cabinet
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="awards.html">
              <i class="bi bi-award me-1"></i>Awards
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link logout-btn" href="index.html">
              <i class="bi bi-box-arrow-right me-1"></i>Logout
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <body>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <div>
        <h4>Player Dashboard</h4>
        <a class="active" href="#"> <i class="bi bi-house active"></i> Dashboard </a>
        <a href="seasondata.html">
          <i class="bi bi bi-bar-chart-steps"></i> Season Data
        </a>
        <a href="yearlydata.html">
          <i class="bi bi-bar-chart"></i> Yearly Data
        </a>
        <a href="stats.html"> <i class="bi bi-graph-up-arrow"></i> Stats </a
        ><a href="trophies.html">
          <i class="bi bi-trophy"></i> Trophy Cabinet
        </a>
        <a href="awards.html"> <i class="bi bi-award"></i> Awards </a>
      </div>
      <div class="sidebar-footer">
        <a class="logout-btn" href="index.html">
          <i class="bi bi-box-arrow-right"></i> Logout
        </a>
      </div>
    </div>

    <!-- Sidebar Toggle Button -->
    <div class="sidebar-toggle" onclick="toggleSidebar()">
      <i class="bi bi-list"></i>
    </div>
<!-- Main Content -->
<div class="main-content">
  <!-- Player Data Section -->
  <section class="content-section active" id="dashboard">
    <div class="row mb-4">
      <div class="col-lg-4 mb-4">
        <div class="dashboard-card player-profile">
          <h3>Player Profile</h3>
          <div class="player-info mt-4">
            <div class="d-flex align-items-center mb-3">
              <div class="player-avatar me-3">
                <img id="playerAvatar" src="assets/images/Inam.png" alt="Player Avatar" class="rounded-circle" width="80" height="80">
              </div>
              <div>
                <h4 id="playerName" class="mb-1">Loading...</h4>
                <div id="playerPosition" class="badge bg-primary mb-2">Position</div>
                <div class="d-flex align-items-center">
                  <img id="playerCountryFlag" src="assets/images/Spain.png" alt="Country Flag" width="24" height="16" class="me-2">
                  <span id="playerNationality">Nationality</span>
                </div>
              </div>
            </div>
            <div class="row player-stats">
              <div class="col-4 text-center">
                <div class="stat-value" id="playerAge">--</div>
                <div class="stat-label">Age</div>
              </div>
              <div class="col-4 text-center">
                <div class="stat-value" id="playerRating">--</div>
                <div class="stat-label">Rating</div>
              </div>
              <div class="col-4 text-center">
                <div class="stat-value" id="playerValue">--</div>
                <div class="stat-label">Value</div>
              </div>
            </div>
          </div>
        </div>
      </div>

          <div class="col-lg-8 mb-4">
              <div class="dashboard-card current-club">
                  <h3>Current Club</h3>
                  <div class="d-flex align-items-center mt-4">
                      <div class="club-logo me-4">
                          <img id="clubLogo" src="assets/images/teams/Manchester City.png" alt="Club Logo" width="90" height="100">
                      </div>
                      <div class="club-info">
                          <h4 id="clubName" class="mb-3 loading">Manchester City</h4>
                          <div class="info-item mb-3">
                              <img id="clubCountryFlag" src="assets/images/england.png" alt="Club Country" width="16" height="16" class="me-2">
                              <span id="clubLeague">Premier League</span>
                          </div>
                          <div class="contract-info">
                              <div class="contract-item">
                                  <i class="bi bi-calendar-event"></i>
                                  <strong>Joined:</strong> <span id="joinedDate">July 2022</span>
                              </div>
                              <div class="contract-item">
                                  <i class="bi bi-file-text"></i>
                                  <strong>Contract until:</strong> <span id="contractEnd">June 2027</span>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

    <!-- G+A Per Season Section -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="dashboard-card">
          <h3>Goals + Assists Per Season</h3>
          <div class="chart-container" style="position: relative; height: 300px; width: 100%;">
            <canvas id="gaPerSeasonChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-4">
      <div class="col-12">
        <div class="dashboard-card">
          <h3>Goals + Assists Per Year</h3>
          <div class="chart-container" style="position: relative; height: 300px; width: 100%;">
            <canvas id="gaPerYearChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Transfer History Section -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="dashboard-card">
          <h3>Transfer History</h3>
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>From</th>
                  <th>To</th>
                  <th>Transfer Amount</th>
                </tr>
              </thead>
              <tbody id="transferHistoryTable">
                <tr>
                  <td colspan="4" class="text-center">Loading transfer data...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Trophies Section -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="dashboard-card">
          <h3>Trophy Cabinet</h3>
          <div class="row mt-4">
            <div class="col-md-4 mb-4">
              <div class="trophy-category text-center">
                <i class="bi bi-building trophy-icon"></i>
                <h5>Club Trophies</h5>
                <div class="trophy-count" id="clubTrophyCount">0</div>
                <div class="trophy-list mt-3" id="clubTrophyList">
                  <!-- Will be populated by JavaScript -->
                </div>
              </div>
            </div>
            <div class="col-md-4 mb-4">
              <div class="trophy-category text-center">
                <i class="bi bi-globe trophy-icon"></i>
                <h5>International Trophies</h5>
                <div class="trophy-count" id="internationalTrophyCount">0</div>
                <div class="trophy-list mt-3" id="internationalTrophyList">
                  <!-- Will be populated by JavaScript -->
                </div>
              </div>
            </div>
            <div class="col-md-4 mb-4">
              <div class="trophy-category text-center">
                <i class="bi bi-person-badge trophy-icon"></i>
                <h5>Major Honors</h5>
                <div class="trophy-count" id="individualAwardCount">0</div>
                <div class="trophy-list mt-3" id="individualAwardList">
                  <!-- Will be populated by JavaScript -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Additional CSS for new components -->
<style>
  .player-profile .player-avatar img {
    border: 3px solid var(--primary);
  }

  .player-stats {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--gray-light);
  }

  .stat-value {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--primary);
  }

  .stat-label {
    font-size: 0.875rem;
    color: var(--gray);
    font-weight: 500;
  }

  .current-club, .player-profile {
    height: 100%;
  }

  .trophy-icon {
    font-size: 2.5rem;
    color: var(--warning);
    margin-bottom: 1rem;
  }

  .trophy-count {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary);
  }

  .trophy-item {
    display: flex;
    align-items: center;
    margin-bottom: 0.5rem;
  }

  .trophy-item .trophy-year {
    font-weight: 600;
    margin-right: 0.5rem;
    color: var(--dark);
  }

  .trophy-item .trophy-name {
    font-weight: 500;
    color: var(--gray);
  }

  .chart-container {
    margin-top: 1.5rem;
  }
</style>

<!-- JavaScript for player data loading and chart rendering -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script>
  // Mock data to simulate loading from an API or database
  const playerData = {
    name: "Inam Ullah Shaikh",
    position: "Striker",
    nationality: "Spain",
    age: 28,
    rating: 95,
    value: "€300M",
    currentClub: {
      name: "Manchester City",
      country: "England",
      league: "Premier League",
      joined: "July 2030",
      contractUntil: "June 2035"
    },
    goalsAssistsPerSeason: [
      { season: "2018/19", goals: 28, assists: 10 },
      { season: "2019/20", goals: 37, assists: 7 },
      { season: "2020/21", goals: 36, assists: 4 },
      { season: "2021/22", goals: 24, assists: 3 },
      { season: "2022/23", goals: 30, assists: 5 },
      { season: "2023/24", goals: 35, assists: 11 },
      { season: "2020/21", goals: 36, assists: 4 },
      { season: "2021/22", goals: 24, assists: 3 },
      { season: "2022/23", goals: 30, assists: 5 },
      { season: "2023/24", goals: 105, assists: 11 }
    ],
    transferHistory: [
      { date: "July 2025", from: "Athletic Bilbao", to: "FC Barcelona", amount: "€280M" },
      { date: "July 2030", from: "FC Barcelona", to: "Manchester City", amount: "€360M" },
    ],
    goalsAssistsPerYear:[],
  };

  // Initialize the dashboard when the page is loaded
  document.addEventListener('DOMContentLoaded', function() {
    // Load player profile data
    loadPlayerProfile();
    
    // Load current club data
    loadCurrentClub();
    
    // Render G+A chart
    renderGoalsAssistsChart();
    
    // Load transfer history
    loadTransferHistory();
    
    // Load trophies
    loadTrophies();

    // Initialize sidebar toggle functionality
    document.getElementById('sidebar-toggle').addEventListener('click', toggleSidebar);
  });

  // Function to load player profile data
  function loadPlayerProfile() {
    document.getElementById('playerName').textContent = playerData.name;
    document.getElementById('playerPosition').textContent = playerData.position;
    document.getElementById('playerNationality').textContent = playerData.nationality;
    document.getElementById('playerAge').textContent = playerData.age;
    document.getElementById('playerRating').textContent = playerData.rating;
    document.getElementById('playerValue').textContent = playerData.value;
    
    // In a real app, you would set the actual image URLs
    // document.getElementById('playerAvatar').src = playerData.avatarUrl;
    // document.getElementById('playerCountryFlag').src = `flags/${playerData.nationality.toLowerCase()}.png`;
  }

  // Function to load current club data
  function loadCurrentClub() {
    document.getElementById('clubName').textContent = playerData.currentClub.name;
    document.getElementById('clubLeague').textContent = playerData.currentClub.league;
    document.getElementById('joinedDate').textContent = playerData.currentClub.joined;
    document.getElementById('contractEnd').textContent = playerData.currentClub.contractUntil;
    
    // In a real app, you would set the actual image URLs
    // document.getElementById('clubLogo').src = `clubs/${playerData.currentClub.name.replace(/\s+/g, '-').toLowerCase()}.png`;
    // document.getElementById('clubCountryFlag').src = `flags/${playerData.currentClub.country.toLowerCase()}.png`;
  }

  // Function to render the Goals+Assists chart
  // Function to render the Goals+Assists charts
  async function renderGoalsAssistsChart() {
    // Render Season Chart
    await renderSeasonChart();
    
    // Render Yearly Chart
    await renderYearlyChart();
  }

// Function to render Season Goals+Assists chart
  // 🎨 Beautiful Season Chart Renderer with Enhanced Animations
async function renderSeasonChart() {
  try {
    // 🔄 Show elegant loading state
    showChartLoading('gaPerSeasonChart');
    
    const [clubRes, intRes] = await Promise.all([
      fetch("http://localhost:5000/api/season-data"),
      fetch("http://localhost:5000/api/int-data")
    ]);

    const clubData = await clubRes.json();
    const intData = await intRes.json();

    const seasonMap = new Map();

    const processEntry = (entry) => {
      const { season, goals, assists } = entry;
      if (!seasonMap.has(season)) {
        seasonMap.set(season, { goals: 0, assists: 0 });
      }
      const seasonStats = seasonMap.get(season);
      seasonStats.goals += goals;
      seasonStats.assists += assists;
    };

    clubData.forEach(processEntry);
    intData.forEach(processEntry);

    // Convert map to array sorted by season
    const combinedData = Array.from(seasonMap.entries())
      .map(([season, stats]) => ({
        season,
        goals: stats.goals,
        assists: stats.assists,
        total: stats.goals + stats.assists
      }))
      .sort((a, b) => a.season.localeCompare(b.season));

    // Update playerData
    playerData.goalsAssistsPerSeason = combinedData;

    console.log("📊 Goals + Assists Per Season:", combinedData);

    // Hide loading and render the chart
    hideChartLoading('gaPerSeasonChart');
    const ctx = document.getElementById('gaPerSeasonChart').getContext('2d');
    
    // Destroy existing chart if it exists
    if (window.seasonChart && typeof window.seasonChart.destroy === 'function') {
      window.seasonChart.destroy();
    }
    
    // Extract data for the chart
    const seasons = combinedData.map(item => item.season);
    const goals = combinedData.map(item => item.goals);
    const assists = combinedData.map(item => item.assists);
    
    // 🎨 Create beautiful gradient fills
    const goalsGradient = ctx.createLinearGradient(0, 0, 0, 400);
    goalsGradient.addColorStop(0, 'rgba(255, 107, 107, 0.8)');
    goalsGradient.addColorStop(0.5, 'rgba(255, 107, 107, 0.4)');
    goalsGradient.addColorStop(1, 'rgba(255, 107, 107, 0.1)');
    
    const assistsGradient = ctx.createLinearGradient(0, 0, 0, 400);
    assistsGradient.addColorStop(0, 'rgba(78, 205, 196, 0.8)');
    assistsGradient.addColorStop(0.5, 'rgba(78, 205, 196, 0.4)');
    assistsGradient.addColorStop(1, 'rgba(78, 205, 196, 0.1)');
    
    window.seasonChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: seasons,
        datasets: [
          {
            label: '⚽ Goals',
            data: goals,
            backgroundColor: goalsGradient,
            borderColor: '#ff6b6b',
            borderWidth: 3,
            pointBackgroundColor: '#ff6b6b',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6,
            pointHoverRadius: 8,
            pointHoverBackgroundColor: '#ff6b6b',
            pointHoverBorderColor: '#ffffff',
            pointHoverBorderWidth: 3,
            tension: 0.4,
            fill: true,
            shadowOffsetX: 0,
            shadowOffsetY: 4,
            shadowBlur: 10,
            shadowColor: 'rgba(255, 107, 107, 0.3)'
          },
          {
            label: '🎯 Assists',
            data: assists,
            backgroundColor: assistsGradient,
            borderColor: '#4ecdc4',
            borderWidth: 3,
            pointBackgroundColor: '#4ecdc4',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6,
            pointHoverRadius: 8,
            pointHoverBackgroundColor: '#4ecdc4',
            pointHoverBorderColor: '#ffffff',
            pointHoverBorderWidth: 3,
            tension: 0.4,
            fill: true,
            shadowOffsetX: 0,
            shadowOffsetY: 4,
            shadowBlur: 10,
            shadowColor: 'rgba(78, 205, 196, 0.3)'
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: {
          duration: 2000,
          easing: 'easeInOutCubic',
          animateRotate: true,
          animateScale: true
        },
        interaction: {
          mode: 'index',
          intersect: false,
        },
        plugins: {
          legend: {
            position: 'top',
            labels: {
              usePointStyle: true,
              pointStyle: 'circle',
              padding: 20,
              font: {
                size: 14,
                weight: '600',
                family: "'Segoe UI', sans-serif"
              },
              color: '#2c3e50'
            }
          },
          tooltip: {
            backgroundColor: 'rgba(255, 255, 255, 0.95)',
            titleColor: '#2c3e50',
            bodyColor: '#2c3e50',
            borderColor: 'rgba(0, 0, 0, 0.1)',
            borderWidth: 1,
            cornerRadius: 12,
            displayColors: true,
            padding: 12,
            titleFont: {
              size: 16,
              weight: 'bold'
            },
            bodyFont: {
              size: 14
            },
            callbacks: {
              title: function(context) {
                return `Season ${context[0].label}`;
              },
              label: function(context) {
                const emoji = context.dataset.label.includes('Goals') ? '⚽' : '🎯';
                return `${emoji} ${context.dataset.label.replace(/[⚽🎯]/g, '').trim()}: ${context.parsed.y}`;
              },
              afterBody: function(context) {
                const dataIndex = context[0].dataIndex;
                const total = combinedData[dataIndex].total;
                return [`📊 Total Contributions: ${total}`];
              }
            }
          }
        },
        scales: {
          x: {
            grid: {
              display: true,
              color: 'rgba(0, 0, 0, 0.05)',
              lineWidth: 1
            },
            ticks: {
              color: '#7f8c8d',
              font: {
                size: 12,
                weight: '500'
              },
              maxRotation: 45
            }
          },
          y: {
            beginAtZero: true,
            grid: {
              display: true,
              color: 'rgba(0, 0, 0, 0.05)',
              lineWidth: 1
            },
            ticks: {
              precision: 0,
              color: '#7f8c8d',
              font: {
                size: 12,
                weight: '500'
              },
              callback: function(value) {
                return value === 0 ? '0' : value;
              }
            }
          }
        }
      }
    });

    // 🎉 Success animation
    //showSuccessNotification("Season chart loaded successfully!");

  } catch (error) {
    console.error("❌ Failed to load season data:", error);
    hideChartLoading('gaPerSeasonChart');
    showErrorNotification("Error loading player season stats.");
  }
}

// 🎨 Beautiful Yearly Chart Renderer with Enhanced Animations
async function renderYearlyChart() {
  try {
    // 🔄 Show elegant loading state
    showChartLoading('gaPerYearChart');
    
    const yearlyRes = await fetch("http://localhost:5000/api/yearly-data");
    const yearlyData = await yearlyRes.json();

    const yearlyMap = new Map();

    const processEntry = (entry) => {
      const { year, goals, assists } = entry;
      if (!yearlyMap.has(year)) {
        yearlyMap.set(year, { goals: 0, assists: 0 });
      }
      const yearStats = yearlyMap.get(year);
      yearStats.goals += goals;
      yearStats.assists += assists;
    };

    yearlyData.forEach(processEntry);

    // Convert map to array sorted by year
    const combinedData = Array.from(yearlyMap.entries())
      .map(([year, stats]) => ({
        year,
        goals: stats.goals,
        assists: stats.assists,
        total: stats.goals + stats.assists
      }))
      .sort((a, b) => parseInt(a.year) - parseInt(b.year));

    // Update playerData
    playerData.goalsAssistsPerYear = combinedData;

    console.log("📊 Goals + Assists Per Year:", combinedData);

    // Hide loading and render the yearly chart
    hideChartLoading('gaPerYearChart');
    const ctx1 = document.getElementById('gaPerYearChart').getContext('2d');
    
    // Destroy existing chart if it exists
    if (window.yearlyChart && typeof window.yearlyChart.destroy === 'function') {
      window.yearlyChart.destroy();
    }
    
    // Extract data for the chart
    const years = combinedData.map(item => item.year);
    const goals = combinedData.map(item => item.goals);
    const assists = combinedData.map(item => item.assists);
    
    // 🎨 Create beautiful gradient fills
    const goalsGradient = ctx1.createLinearGradient(0, 0, 0, 400);
    goalsGradient.addColorStop(0, 'rgba(239, 71, 111, 0.8)');
    goalsGradient.addColorStop(0.5, 'rgba(239, 71, 111, 0.4)');
    goalsGradient.addColorStop(1, 'rgba(239, 71, 111, 0.1)');
    
    const assistsGradient = ctx1.createLinearGradient(0, 0, 0, 400);
    assistsGradient.addColorStop(0, 'rgba(6, 214, 160, 0.8)');
    assistsGradient.addColorStop(0.5, 'rgba(6, 214, 160, 0.4)');
    assistsGradient.addColorStop(1, 'rgba(6, 214, 160, 0.1)');
    
    window.yearlyChart = new Chart(ctx1, {
      type: 'line',
      data: {
        labels: years,
        datasets: [
          {
            label: '🔥 Goals',
            data: goals,
            backgroundColor: goalsGradient,
            borderColor: '#ef476f',
            borderWidth: 3,
            pointBackgroundColor: '#ef476f',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6,
            pointHoverRadius: 8,
            pointHoverBackgroundColor: '#ef476f',
            pointHoverBorderColor: '#ffffff',
            pointHoverBorderWidth: 3,
            tension: 0.4,
            fill: true,
            shadowOffsetX: 0,
            shadowOffsetY: 4,
            shadowBlur: 10,
            shadowColor: 'rgba(239, 71, 111, 0.3)'
          },
          {
            label: '✨ Assists',
            data: assists,
            backgroundColor: assistsGradient,
            borderColor: '#06d6a0',
            borderWidth: 3,
            pointBackgroundColor: '#06d6a0',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 3,
            pointRadius: 6,
            pointHoverRadius: 8,
            pointHoverBackgroundColor: '#06d6a0',
            pointHoverBorderColor: '#ffffff',
            pointHoverBorderWidth: 3,
            tension: 0.4,
            fill: true,
            shadowOffsetX: 0,
            shadowOffsetY: 4,
            shadowBlur: 10,
            shadowColor: 'rgba(6, 214, 160, 0.3)'
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: {
          duration: 2000,
          easing: 'easeInOutCubic',
          animateRotate: true,
          animateScale: true
        },
        interaction: {
          mode: 'index',
          intersect: false,
        },
        plugins: {
          legend: {
            position: 'top',
            labels: {
              usePointStyle: true,
              pointStyle: 'circle',
              padding: 20,
              font: {
                size: 14,
                weight: '600',
                family: "'Segoe UI', sans-serif"
              },
              color: '#2c3e50'
            }
          },
          tooltip: {
            backgroundColor: 'rgba(255, 255, 255, 0.95)',
            titleColor: '#2c3e50',
            bodyColor: '#2c3e50',
            borderColor: 'rgba(0, 0, 0, 0.1)',
            borderWidth: 1,
            cornerRadius: 12,
            displayColors: true,
            padding: 12,
            titleFont: {
              size: 16,
              weight: 'bold'
            },
            bodyFont: {
              size: 14
            },
            callbacks: {
              title: function(context) {
                return `Year ${context[0].label}`;
              },
              label: function(context) {
                const emoji = context.dataset.label.includes('Goals') ? '🔥' : '✨';
                return `${emoji} ${context.dataset.label.replace(/[🔥✨]/g, '').trim()}: ${context.parsed.y}`;
              },
              afterBody: function(context) {
                const dataIndex = context[0].dataIndex;
                const total = combinedData[dataIndex].total;
                return [`🎯 Total Contributions: ${total}`];
              }
            }
          }
        },
        scales: {
          x: {
            grid: {
              display: true,
              color: 'rgba(0, 0, 0, 0.05)',
              lineWidth: 1
            },
            ticks: {
              color: '#7f8c8d',
              font: {
                size: 12,
                weight: '500'
              }
            }
          },
          y: {
            beginAtZero: true,
            grid: {
              display: true,
              color: 'rgba(0, 0, 0, 0.05)',
              lineWidth: 1
            },
            ticks: {
              precision: 0,
              color: '#7f8c8d',
              font: {
                size: 12,
                weight: '500'
              },
              callback: function(value) {
                return value === 0 ? '0' : value;
              }
            }
          }
        }
      }
    });

    // 🎉 Success animation
    //showSuccessNotification("Yearly chart loaded successfully!");

  } catch (error) {
    console.error("❌ Failed to load yearly data:", error);
    hideChartLoading('gaPerYearChart');
    showErrorNotification("Error loading player yearly stats.");
  }
}

// 🎨 Helper Functions for Enhanced UX

function showChartLoading(chartId) {
  const canvas = document.getElementById(chartId);
  if (canvas) {
    const container = canvas.parentElement;
    
    // Create loading overlay
    const loadingOverlay = document.createElement('div');
    loadingOverlay.className = 'chart-loading-overlay';
    loadingOverlay.innerHTML = `
      <div class="loading-spinner">
        <div class="spinner-ring"></div>
        <div class="loading-text">Loading chart data...</div>
      </div>
    `;
    
    // Add loading styles if not already present
    if (!document.getElementById('chart-loading-styles')) {
      const styles = document.createElement('style');
      styles.id = 'chart-loading-styles';
      styles.textContent = `
        .chart-loading-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(5px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          border-radius: 12px;
        }
        
        .loading-spinner {
          text-align: center;
        }
        
        .spinner-ring {
          width: 40px;
          height: 40px;
          border: 4px solid #f3f3f3;
          border-top: 4px solid #667eea;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 16px;
        }
        
        .loading-text {
          color: #667eea;
          font-weight: 600;
          font-size: 14px;
        }
        
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `;
      document.head.appendChild(styles);
    }
    
    container.style.position = 'relative';
    container.appendChild(loadingOverlay);
  }
}

function hideChartLoading(chartId) {
  const canvas = document.getElementById(chartId);
  if (canvas) {
    const container = canvas.parentElement;
    const overlay = container.querySelector('.chart-loading-overlay');
    if (overlay) {
      overlay.style.opacity = '0';
      setTimeout(() => overlay.remove(), 300);
    }
  }
}

function showSuccessNotification(message) {
  createNotification(message, 'success', '✅');
}

function showErrorNotification(message) {
  createNotification(message, 'error', '❌');
}

function createNotification(message, type, icon) {
  // Add notification styles if not already present
  if (!document.getElementById('notification-styles')) {
    const styles = document.createElement('style');
    styles.id = 'notification-styles';
    styles.textContent = `
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 16px 20px;
        border-radius: 12px;
        color: white;
        font-weight: 600;
        z-index: 10000;
        transform: translateX(400px);
        transition: transform 0.3s ease, opacity 0.3s ease;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      
      .notification.success {
        background: linear-gradient(135deg, rgba(40, 167, 69, 0.9), rgba(25, 135, 84, 0.9));
      }
      
      .notification.error {
        background: linear-gradient(135deg, rgba(220, 53, 69, 0.9), rgba(187, 31, 46, 0.9));
      }
      
      .notification.show {
        transform: translateX(0);
      }
    `;
    document.head.appendChild(styles);
  }
  
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.innerHTML = `${icon} ${message}`;
  
  document.body.appendChild(notification);
  
  // Trigger animation
  setTimeout(() => notification.classList.add('show'), 100);
  
  // Auto remove
  setTimeout(() => {
    notification.classList.remove('show');
    setTimeout(() => notification.remove(), 300);
  }, 3000);
}

// 🎯 Enhanced Chart Resize Handler
function handleChartResize() {
  if (window.seasonChart) {
    window.seasonChart.resize();
  }
  if (window.yearlyChart) {
    window.yearlyChart.resize();
  }
}

// Add resize listener
window.addEventListener('resize', handleChartResize);

// 🎨 Chart Theme Configuration
const chartTheme = {
  colors: {
    primary: '#667eea',
    secondary: '#764ba2',
    success: '#28a745',
    danger: '#dc3545',
    warning: '#ffc107',
    info: '#17a2b8',
    goals: '#ff6b6b',
    assists: '#4ecdc4',
    goalsAlt: '#ef476f',
    assistsAlt: '#06d6a0'
  },
  fonts: {
    family: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
    size: {
      small: 12,
      medium: 14,
      large: 16
    }
  },
  animations: {
    duration: 2000,
    easing: 'easeInOutCubic'
  }
};
  // Function to load transfer history
  function loadTransferHistory() {
    const tableBody = document.getElementById('transferHistoryTable');
    tableBody.innerHTML = ''; // Clear loading message
    
    playerData.transferHistory.forEach(transfer => {
      const row = document.createElement('tr');
      
      const dateCell = document.createElement('td');
      dateCell.textContent = transfer.date;
      
      const fromCell = document.createElement('td');
      fromCell.textContent = transfer.from;
      
      const toCell = document.createElement('td');
      toCell.textContent = transfer.to;
      
      const amountCell = document.createElement('td');
      amountCell.textContent = transfer.amount;
      
      row.appendChild(dateCell);
      row.appendChild(fromCell);
      row.appendChild(toCell);
      row.appendChild(amountCell);
      
      tableBody.appendChild(row);
    });
  }

  // Function to load trophies
  async function loadTrophies() {
  try {
    // Club trophies count
    const clubResponse = await fetch("http://localhost:5000/api/season-trophies");
    const clubTrophies = await clubResponse.json();
    document.getElementById('clubTrophyCount').textContent = clubTrophies.length;

    // International trophies count
    const intResponse = await fetch("http://localhost:5000/api/int-trophies");
    const intTrophies = await intResponse.json();
    document.getElementById('internationalTrophyCount').textContent = intTrophies.length;

    const awardresponse = await fetch("http://localhost:5000/api/season-awards");
    const awards = await awardresponse.json();
    const majorKeywords = ["Ballon d'Or", "Golden Boot", "FIFA Best Player", "Copa Trophy"];
    const majorHonorCount = awards.filter(a =>
      majorKeywords.some(keyword => a.award.trim().toLowerCase() === keyword.toLowerCase())
    ).length;
    document.getElementById('individualAwardCount').textContent = majorHonorCount;
  } catch (error) {
    console.error("Error loading trophy counts:", error);
  }
}


  // Toggle sidebar function
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('active');
  }
</script>
  </body>
</html>
